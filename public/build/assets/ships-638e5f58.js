import{_ as b,r as D,o as a,c as l,a as i,b as c,t as m,d as S,F as u,e as f,w as g,v as _,f as w,g as C,n as v,h as k,i as x}from"./app-22e979f1.js";const I={name:"ships",data(){return{drag:!1,tieritems:{S:{items:[],name:"S",color:"#c89afd"},A:{items:[],name:"A",color:"#0085b5"},B:{items:[],name:"B",color:"#60dbe8"},C:{items:[],name:"C",color:"#8bd346"},D:{items:[],name:"D",color:"#f9a52c"},E:{items:[],name:"E",color:"#b85042"},F:{items:[],name:"F",color:"#671b11"}},ships:{},showAddship:!1,editShipID:0,shipRarity:["Common","Rare","Elite","Super rare","Ultra"],shipType:["DD","CL","CA","BB","CB","CV","AR","SS","Misc"],shipFaction:["Iris Libre","Vichya Dominion","Eagle Union","Royal Navy","Sakura Empire","Iron Blood","Dragon Empery","Northern Parliament","Sardegna Empire"],factions:["Iris Orthodoxy","Eagle Union","Royal Navy","Sakura Empire","Iron Blood","Dragon Empery","Northern Parliament","Sardegna Empire"],currentFaction:"Iris Orthodoxy",newShip:{image:"",name:"",type:"",rarity:"",faction:"",note:""}}},created(){this.getShips()},methods:{switchFaction(t){let s=this.factions.indexOf(this.currentFaction),n;t=="next"?(n=s+1,n=n>this.factions.length-1?0:n):(n=s-1,n=n<0?this.factions.length-1:n),this.currentFaction=this.factions[n],this.getShips()},startDrag(t,s,n){t.dataTransfer.dropEffect="move",t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("shipID",s.id),t.dataTransfer.setData("origin",n)},onDrop(t,s){const n=t.dataTransfer.getData("shipID"),p=t.dataTransfer.getData("origin");if(p=="ships"){const o=this.ships.findIndex(d=>d.id==n);this.tieritems[s].items.push(this.ships[o]),this.ships.splice(o,1)}else{const o=this.tieritems[p].items.findIndex(d=>d.id==n);this.tieritems[s].items.push(this.tieritems[p].items[o]),this.tieritems[p].items.splice(o,1)}},addShip:function(){this.refreshInputs(),this.showAddship=!0},addShipSubmit:function(){if(this.newShip.image!==""&&this.newShip.name!==""&&this.newShip.type!==""&&this.newShip.rarity!==""&&this.newShip.faction!=="")this.axios.post("/addship",this.newShip).then(t=>{t.data.bool=="true"?(this.$notify({text:t.data.message,type:"success",duration:3e3}),this.getShips(),this.showAddship=!1):this.$notify({text:t.data.message,type:"error",duration:3e3})});else{let t=[];this.newShip.faction===""&&t.push('Ship "Faction" is mandatory'),this.newShip.rarity===""&&t.push('Ship "Rarity" is mandatory'),this.newShip.type===""&&t.push('Ship "Type" is mandatory'),this.newShip.name===""&&t.push('Ship "Name" is mandatory'),this.newShip.image===""&&t.push('Ship "Image" is mandatory'),t.forEach(s=>{this.$notify({text:s,type:"warn",duration:3e3})})}},deleteShip:function(t){t!=null&&t.id!="0"&&this.$swal({title:"Deletion",text:"Are you sure You want to delete: "+t.name+"?",type:"warning",showCancelButton:!0,cancelButtonText:"No, wait!",confirmButtonColor:"#a10000",confirmButtonText:"Yes, Delete it!"}).then(s=>{s.value&&this.axios.post("/deleteship",t).then(n=>{n.data.bool=="true"?(this.$notify({text:n.data.message,type:"success",duration:3e3}),this.getShips()):this.$notify({text:n.data.message,type:"error",duration:3e3})})})},saveTierList:function(){this.axios.post("/saveshiptierlist",this.tieritems).then(t=>{t.data.bool=="true"?this.$notify({text:t.data.message,type:"success",duration:3e3}):this.$notify({text:t.data.message,type:"error",duration:3e3})})},editShip:function(t){t!=null&&t.id!="0"&&(this.refreshInputs(),this.showAddship=!0,this.editShipID=t.id,this.newShip=Object.assign({},t))},editShipSubmit:function(){if(this.newShip.image!==""&&this.newShip.name!==""&&this.newShip.type!==""&&this.newShip.rarity!==""&&this.newShip.faction!=="")this.axios.post("/editship",this.newShip).then(t=>{t.data.bool=="true"?(this.$notify({text:t.data.message,type:"success",duration:3e3}),this.getShips(),this.showAddship=!1):this.$notify({text:t.data.message,type:"error",duration:3e3})});else{let t=[];this.newShip.faction===""&&t.push('Ship "Faction" is mandatory'),this.newShip.rarity===""&&t.push('Ship "Rarity" is mandatory'),this.newShip.type===""&&t.push('Ship "Type" is mandatory'),this.newShip.name===""&&t.push('Ship "Name" is mandatory'),this.newShip.image===""&&t.push('Ship "Image" is mandatory'),t.forEach(s=>{this.$notify({text:s,type:"warn",duration:3e3})})}},onFileChanged:function(t){let s=this,n=t.target.files[0];if(n!=null){let p=new FileReader;p.readAsDataURL(n),p.onload=function(){s.newShip.image=p.result}}},getShips:function(){this.axios.post("/getships",{faction:this.currentFaction}).then(t=>{this.ships=t.data.ships.notier,this.tieritems.S.items=t.data.ships.S!==void 0?t.data.ships.S:[],this.tieritems.A.items=t.data.ships.A!==void 0?t.data.ships.A:[],this.tieritems.B.items=t.data.ships.B!==void 0?t.data.ships.B:[],this.tieritems.C.items=t.data.ships.C!==void 0?t.data.ships.C:[],this.tieritems.D.items=t.data.ships.D!==void 0?t.data.ships.D:[],this.tieritems.E.items=t.data.ships.E!==void 0?t.data.ships.E:[],this.tieritems.F.items=t.data.ships.F!==void 0?t.data.ships.F:[]})},refreshInputs:function(){this.editShipID=0,this.newShip={image:"",name:"",type:"",rarity:this.newShip.rarity,faction:this.newShip.faction,note:""}}}},F={class:"p-4"},A={class:"row"},E={class:"col-12 col-md-12 offset-lg-1 col-lg-10 offset-xl-1 col-xl-10"},B={class:"row"},T={id:"addbutton",class:"col-12 col-md-12 col-lg-6 col-xl-6 addbutton position-relative"},N={class:"button-default bg-secondary text-white fw-bold pointer d-flex justify-content-between"},V={class:"button-default button-slanted bg-secondary text-white fw-bold pointer"},R={class:"button-slanted-content"},U={class:"row"},L={class:"col-12 col-md-12 col-lg-12 col-xl-12"},M={id:"shiplist",class:"shiplist d-flex gap-2"},O=["onDragstart","id"],z=["src"],j={class:"shipname"},P=["src"],Y={class:"col-12 col-md-12 offset-lg-1 col-lg-10 offset-xl-1 col-xl-10"},q={class:"tiers bg-dark"},G={class:"tiername text-white position-relative"},H={class:"position-absolute"},J=["onDrop"],K=["onDragstart","id"],Q=["src"],W={class:"shipname"},X=["src"],Z={class:"col-12 col-md-12 offset-lg-1 col-lg-10 offset-xl-1 col-xl-10"},$={class:"col-12"},tt={key:0,class:"popup",id:"addship"},it={class:"row"},st={class:"col-12"},et={key:0,class:"text-center text-primary"},nt={key:1,class:"text-center text-primary"},ot=["src"],at=["src"],lt={class:"row"},dt={class:"col-6"},rt={class:"col-6"},ht={class:"row"},ct={class:"col-6"},pt=i("option",{value:""},"Select a ship type",-1),mt={class:"col-6"},ut=i("option",{value:""},"Select a ship rarity",-1),ft={class:"row"},gt={class:"col-6"},St=i("option",{value:""},"Select a ship faction",-1),yt={class:"row"},wt={class:"col-12"},_t={class:"row"},vt={class:"col-12"};function xt(t,s,n,p,o,d){const h=D("font-awesome-icon");return a(),l("section",F,[i("div",A,[i("div",E,[i("div",B,[i("div",T,[i("div",N,[c(h,{class:"my-auto",icon:"fa-solid fa-angles-left",onClick:s[0]||(s[0]=e=>d.switchFaction("prev"))}),i("span",null,m(o.currentFaction),1),c(h,{class:"my-auto",icon:"fa-solid fa-angles-right",onClick:s[1]||(s[1]=e=>d.switchFaction("next"))})])]),i("div",{id:"addbutton",class:"col-12 col-md-12 offset-lg-2 col-lg-4 offset-xl-2 col-xl-4 addbutton position-relative",onClick:s[2]||(s[2]=e=>d.addShip())},[i("div",V,[i("span",R,[c(h,{icon:"fa-solid fa-plus"}),S(" Add Ship")])])])]),i("div",U,[i("div",L,[i("div",M,[(a(!0),l(u,null,f(o.ships,e=>(a(),l("div",{class:"ship",draggable:"",onDragstart:r=>d.startDrag(r,e,"ships"),id:e.id},[c(h,{icon:"fa-solid fa-pen",class:"editShip",onClick:r=>d.editShip(e)},null,8,["onClick"]),c(h,{icon:"fa-solid fa-trash",class:"deleteShip",onClick:r=>d.deleteShip(e)},null,8,["onClick"]),i("div",{class:v("d-flex flex-column position-relative shipborder "+e.rarity)},[i("img",{src:"/getimagedata/ships/"+e.image,class:"shipimage"},null,8,z),i("span",j,m(e.name),1),i("img",{src:"/getimagedata/shiptypes/"+e.type+".png",class:"position-absolute shipicon"},null,8,P)],2)],40,O))),256))])])])]),i("div",Y,[i("div",q,[(a(!0),l(u,null,f(o.tieritems,e=>(a(),l("div",{class:"d-flex flex-row w-100 my-1",style:k("background-color:"+e.color)},[i("div",G,[i("p",H,m(e.name),1)]),i("div",{class:"w-100 flex-wrap tierdata drop-zone d-flex gap-1",onDrop:r=>d.onDrop(r,e.name),onDragover:s[3]||(s[3]=x(()=>{},["prevent"])),onDragenter:s[4]||(s[4]=x(()=>{},["prevent"]))},[(a(!0),l(u,null,f(e.items,r=>(a(),l("div",{class:"ship",draggable:"",onDragstart:y=>d.startDrag(y,r,e.name),id:r.id},[i("div",{class:v("d-flex flex-column position-relative shipborder "+r.rarity)},[c(h,{icon:"fa-solid fa-pen",class:"editShip",onClick:y=>d.editShip(r)},null,8,["onClick"]),c(h,{icon:"fa-solid fa-trash",class:"deleteShip",onClick:y=>d.deleteShip(r)},null,8,["onClick"]),i("img",{src:"/getimagedata/ships/"+r.image,class:"shipimage"},null,8,Q),i("span",W,m(r.name),1),i("img",{src:"/getimagedata/shiptypes/"+r.type+".png",class:"position-absolute shipicon"},null,8,X)],2)],40,K))),256))],40,J)],4))),256))])]),i("div",Z,[i("button",{class:"btn button btn-primary w-100",onClick:s[5]||(s[5]=e=>d.saveTierList())},[c(h,{icon:"fa-solid fa-floppy-disk"}),S(" Save order")])]),i("div",$,[o.showAddship?(a(),l("div",tt,[i("div",it,[i("div",st,[this.editShipID==0?(a(),l("h2",et,"Add ship")):(a(),l("h2",nt,"Edit ship")),c(h,{icon:"fa-solid fa-xmark",class:"position-absolute closepopup text-primary fs-1",onClick:s[6]||(s[6]=e=>this.showAddship=!1)})])]),this.newShip.image.includes("base64")?(a(),l("img",{key:0,src:this.newShip.image,class:"newshipimage"},null,8,ot)):(a(),l("img",{key:1,src:"/getimagedata/ships/"+this.newShip.image,class:"newshipimage"},null,8,at)),i("div",lt,[i("div",dt,[i("input",{type:"file",id:"image",class:"form-control mb-2",onChange:s[7]||(s[7]=e=>d.onFileChanged(e)),accept:"image/*",placeholder:"shipimage"},null,32)]),i("div",rt,[g(i("input",{type:"text",id:"name",class:"form-control mb-2","onUpdate:modelValue":s[8]||(s[8]=e=>o.newShip.name=e),placeholder:"Ship name"},null,512),[[_,o.newShip.name]])])]),i("div",ht,[i("div",ct,[g(i("select",{id:"type",class:"form-control mb-2","onUpdate:modelValue":s[9]||(s[9]=e=>o.newShip.type=e)},[pt,(a(!0),l(u,null,f(o.shipType,e=>(a(),l("option",null,m(e),1))),256))],512),[[w,o.newShip.type]])]),i("div",mt,[g(i("select",{id:"rarity",class:"form-control mb-2","onUpdate:modelValue":s[10]||(s[10]=e=>o.newShip.rarity=e)},[ut,(a(!0),l(u,null,f(o.shipRarity,e=>(a(),l("option",null,m(e),1))),256))],512),[[w,o.newShip.rarity]])])]),i("div",ft,[i("div",gt,[g(i("select",{id:"faction",class:"form-control mb-4","onUpdate:modelValue":s[11]||(s[11]=e=>o.newShip.faction=e)},[St,(a(!0),l(u,null,f(o.shipFaction,e=>(a(),l("option",null,m(e),1))),256))],512),[[w,o.newShip.faction]])])]),i("div",yt,[i("div",wt,[g(i("textarea",{id:"note",class:"form-control h-100","onUpdate:modelValue":s[12]||(s[12]=e=>o.newShip.note=e),rows:"7",placeholder:"Note"},null,512),[[_,o.newShip.note]])])]),i("div",_t,[i("div",vt,[this.editShipID==0?(a(),l("button",{key:0,class:"btn button btn-primary w-100 mt-2",onClick:s[13]||(s[13]=e=>d.addShipSubmit())},[c(h,{icon:"fa-solid fa-plus"}),S(" Add ship")])):(a(),l("button",{key:1,class:"btn button btn-primary w-100 mt-2",onClick:s[14]||(s[14]=e=>d.editShipSubmit())},[c(h,{icon:"fa-solid fa-pen"}),S(" Edit ship")]))])])])):C("",!0)])])])}const Dt=b(I,[["render",xt]]);export{Dt as default};
